 <div class="report-container">

  <div class="heading" >
    <div style="display: flex; flex-direction: row; justify-content: space-between;">
      <div class="dropdown-container" >
        <select class="dropdown options-item options-item-select" [(ngModel)]="selectedReportType" (ngModelChange)="loadReports()">
          <option value="manual" selected>Manually Generated Reports</option>
          <option value="daily">Daily Automatic Generated Reports</option>
          <option value="weekly">Weekly Automatic Generated Reports</option>
          <option value="monthly">Monthly Automatic Generated Reports</option>
        </select>
      </div>
      <div style="margin-right: 35px; margin-top: 12px;"><input [(ngModel)]="tableShowChk" type="checkbox">Show All Details</div>
    </div>
  </div>

  <div class="options">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Report Name</th>
          <th>Generated By</th>
          <th>Generated Date</th>
          <th  *ngIf="tableShowChk">Assigned Reviewer</th>
          <th>Reviewed By</th>
          <th  *ngIf="tableShowChk">Reviewed Date</th>
          <th  *ngIf="tableShowChk">Assigned Approver</th>
          <th>Approved By</th>
          <th  *ngIf="tableShowChk">Approved Date</th>
          <th>Approved(Yes/No)</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of reports">
          <td>{{ report.id }}</td>
          <td>{{ report.name }}</td>
          <td>{{ report.generatedBy}}</td>
          <td>{{ formatDate(report.generatedDate) || '--' }}</td>
          <td  *ngIf="tableShowChk">{{report.assignedReview}}</td>
          <td>{{report.reviewedBy}}</td>
          <td  *ngIf="tableShowChk">{{formatDate(report.reviewDate) || '--' }}</td>
          <td  *ngIf="tableShowChk">{{ report.assignedApprover ? report.assignedApprover : 'N/A' }}</td>
          <td>{{ report.assignedApprover === null ? 'N/A' : report.approvedBy }}</td>
          <td  *ngIf="tableShowChk">{{report.assignedApprover === null ? 'N/A' : (formatDate(report.approvedDate) || '--') }}</td>
          <td>{{ report.isApproved ? 'Yes' : 'No' }}</td>
          <td>
            <img (click)="viewReport(report.id)" class="btn-img" src="../../../assets/images/view.png" title="View">
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="showConfirmDialog" class="dialog-overlay">
    <div class="dialog">
      <p style="color: black;">{{ dialogMessage }}</p>
      <button (click)="handleConfirm(true)">Yes</button>
      <button (click)="handleConfirm(false)">No</button>
    </div>
  </div>

  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>

  <div *ngIf="showPdfModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close-btn" (click)="closePdf()">Close</button>
        <button class="review-btn" (click)="confirmReview(currentReportId!)" [disabled]="isCurrentReportReviewed()"
        [ngClass]="{'disabled-btn': isCurrentReportReviewed()}">Review</button>
      
        <button class="approve-btn" (click)="confirmApprove(currentReportId!)" [disabled]="isCurrentReportApproved()"
          [ngClass]="{'disabled-btn': isCurrentReportApproved()}">Approve</button>
      </div>
      <iframe [src]="pdfUrl" width="100%" height="490px"></iframe>
    </div>
  </div>
</div> 